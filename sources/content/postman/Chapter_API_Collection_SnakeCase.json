{
    "info": {
        "name": "Chapter API Collection (Snake Case)",
        "description": "Complete CRUD operations for Chapter entity with search and pagination - Using snake_case JSON format",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "variable": [{
            "key": "baseUrl",
            "value": "http://localhost:9100",
            "type": "string"
        },
        {
            "key": "chapterId",
            "value": "",
            "type": "string"
        },
        {
            "key": "courseId",
            "value": "550e8400-e29b-41d4-a716-446655440001",
            "type": "string"
        }
    ],
    "item": [{
            "name": "Chapter CRUD Operations",
            "item": [{
                    "name": "1. Create Chapter",
                    "request": {
                        "method": "POST",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"course_id\": \"{{courseId}}\",\n  \"sequence_number\": 1\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters"]
                        },
                        "description": "Create a new chapter with sequence number 1"
                    },
                    "response": []
                },
                {
                    "name": "1.1. Create Chapter (Sequence 2)",
                    "request": {
                        "method": "POST",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"course_id\": \"{{courseId}}\",\n  \"sequence_number\": 2\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters"]
                        },
                        "description": "Create a new chapter with sequence number 2"
                    },
                    "response": []
                },
                {
                    "name": "2. Get Chapter Detail",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters/{{chapterId}}",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters", "{{chapterId}}"]
                        },
                        "description": "Get detailed information of a specific chapter by ID"
                    },
                    "response": []
                },
                {
                    "name": "3. List All Chapters",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters"]
                        },
                        "description": "Get all chapters with default pagination (page=0, size=20)"
                    },
                    "response": []
                },
                {
                    "name": "3.1. List Chapters with Pagination",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters?page=0&size=5",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters"],
                            "query": [{
                                    "key": "page",
                                    "value": "0"
                                },
                                {
                                    "key": "size",
                                    "value": "5"
                                }
                            ]
                        },
                        "description": "Get chapters with custom pagination"
                    },
                    "response": []
                },
                {
                    "name": "4. Search Chapters by Course ID",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters?course_id={{courseId}}",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters"],
                            "query": [{
                                "key": "course_id",
                                "value": "{{courseId}}"
                            }]
                        },
                        "description": "Get all chapters for a specific course"
                    },
                    "response": []
                },
                {
                    "name": "4.1. Search Chapters by Sequence Number",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters?sequence_number=1",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters"],
                            "query": [{
                                "key": "sequence_number",
                                "value": "1"
                            }]
                        },
                        "description": "Get all chapters with sequence number 1"
                    },
                    "response": []
                },
                {
                    "name": "4.2. Complex Search",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters?course_id={{courseId}}&sequence_number=1&page=0&size=10",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters"],
                            "query": [{
                                    "key": "course_id",
                                    "value": "{{courseId}}"
                                },
                                {
                                    "key": "sequence_number",
                                    "value": "1"
                                },
                                {
                                    "key": "page",
                                    "value": "0"
                                },
                                {
                                    "key": "size",
                                    "value": "10"
                                }
                            ]
                        },
                        "description": "Complex search with multiple criteria"
                    },
                    "response": []
                },
                {
                    "name": "5. Update Chapter",
                    "request": {
                        "method": "PUT",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"sequence_number\": 3\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters/{{chapterId}}",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters", "{{chapterId}}"]
                        },
                        "description": "Update chapter sequence number"
                    },
                    "response": []
                },
                {
                    "name": "6. Delete Single Chapter",
                    "request": {
                        "method": "DELETE",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "[\"{{chapterId}}\"]"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters"]
                        },
                        "description": "Delete a single chapter by ID"
                    },
                    "response": []
                },
                {
                    "name": "6.1. Delete Multiple Chapters",
                    "request": {
                        "method": "DELETE",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "[\n  \"770e8400-e29b-41d4-a716-446655440001\",\n  \"770e8400-e29b-41d4-a716-446655440002\",\n  \"770e8400-e29b-41d4-a716-446655440003\"\n]"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters"]
                        },
                        "description": "Delete multiple chapters by providing array of IDs"
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Error Cases & Validation",
            "item": [{
                    "name": "Create Chapter - Missing Course ID",
                    "request": {
                        "method": "POST",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"sequence_number\": 1\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters"]
                        },
                        "description": "Test validation - should return 400 error"
                    },
                    "response": []
                },
                {
                    "name": "Create Chapter - Invalid Sequence Number",
                    "request": {
                        "method": "POST",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"course_id\": \"{{courseId}}\",\n  \"sequence_number\": 0\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters"]
                        },
                        "description": "Test validation - should return 400 error"
                    },
                    "response": []
                },
                {
                    "name": "Create Chapter - Non-existent Course",
                    "request": {
                        "method": "POST",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"course_id\": \"00000000-0000-0000-0000-000000000000\",\n  \"sequence_number\": 1\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters"]
                        },
                        "description": "Test validation - should return 400 error for non-existent course"
                    },
                    "response": []
                },
                {
                    "name": "Create Chapter - Duplicate Sequence",
                    "request": {
                        "method": "POST",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"course_id\": \"{{courseId}}\",\n  \"sequence_number\": 1\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters"]
                        },
                        "description": "Test validation - should return 400 error for duplicate sequence number"
                    },
                    "response": []
                },
                {
                    "name": "Get Chapter - Not Found",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters/00000000-0000-0000-0000-000000000000",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters", "00000000-0000-0000-0000-000000000000"]
                        },
                        "description": "Test 404 error - chapter not found"
                    },
                    "response": []
                },
                {
                    "name": "Update Chapter - Not Found",
                    "request": {
                        "method": "PUT",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"sequence_number\": 5\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters/00000000-0000-0000-0000-000000000000",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters", "00000000-0000-0000-0000-000000000000"]
                        },
                        "description": "Test 404 error - chapter not found for update"
                    },
                    "response": []
                },
                {
                    "name": "Delete Chapter - Empty List",
                    "request": {
                        "method": "DELETE",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "[]"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters"]
                        },
                        "description": "Test validation - should return 400 error for empty list"
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Sample Data Setup",
            "item": [{
                    "name": "Create Sample Chapter 1",
                    "request": {
                        "method": "POST",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"course_id\": \"550e8400-e29b-41d4-a716-446655440001\",\n  \"sequence_number\": 1\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters"]
                        },
                        "description": "Create sample chapter 1"
                    },
                    "response": []
                },
                {
                    "name": "Create Sample Chapter 2",
                    "request": {
                        "method": "POST",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"course_id\": \"550e8400-e29b-41d4-a716-446655440001\",\n  \"sequence_number\": 2\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters"]
                        },
                        "description": "Create sample chapter 2"
                    },
                    "response": []
                },
                {
                    "name": "Create Sample Chapter 3",
                    "request": {
                        "method": "POST",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"course_id\": \"550e8400-e29b-41d4-a716-446655440002\",\n  \"sequence_number\": 1\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/chapters",
                            "host": ["{{baseUrl}}"],
                            "path": ["api", "chapters"]
                        },
                        "description": "Create sample chapter 3"
                    },
                    "response": []
                }
            ]
        }
    ],
    "event": [{
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "// Auto-set chapterId from create chapter response",
                    "if (pm.response && pm.response.json() && pm.response.json().data && pm.response.json().data.chapter_id) {",
                    "    pm.collectionVariables.set('chapterId', pm.response.json().data.chapter_id);",
                    "}"
                ]
            }
        },
        {
            "listen": "test",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "// Auto-extract chapterId from create chapter response",
                    "if (pm.response.json() && pm.response.json().data && pm.response.json().data.chapter_id) {",
                    "    pm.collectionVariables.set('chapterId', pm.response.json().data.chapter_id);",
                    "    console.log('Chapter ID set to:', pm.response.json().data.chapter_id);",
                    "}",
                    "",
                    "// Test response status",
                    "pm.test('Status code is successful', function () {",
                    "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                    "});",
                    "",
                    "// Test response format",
                    "pm.test('Response has correct format', function () {",
                    "    const jsonData = pm.response.json();",
                    "    pm.expect(jsonData).to.have.property('error_code');",
                    "    pm.expect(jsonData).to.have.property('message');",
                    "    pm.expect(jsonData).to.have.property('data');",
                    "});"
                ]
            }
        }
    ]
}